
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RACCOON AI - å‰ç«¯å¤§æ¨¡å‹ç‰ˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.10.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl@4.10.0/dist/tf-backend-webgl.min.js"></script>
    <style>
        :root {
            --primary: #00c9b7;
            --primary-dark: #008a7d;
            --secondary: #007a6e;
            --accent: #00e5ff;
            --dark: #121826;
            --darker: #0d1117;
            --light: #f0f9f8;
            --gray: #2d3748;
            --gray-light: #4a5568;
            --card-bg: rgba(30, 41, 59, 0.85);
            --card-border: rgba(255, 255, 255, 0.1);
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            --purple: #8b5cf6;
            --pink: #ec4899;
            --gradient-1: linear-gradient(135deg, var(--primary), var(--accent));
            --gradient-2: linear-gradient(135deg, var(--purple), var(--pink));
            --shadow-sm: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 8px 25px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.3);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --border-radius: 16px;
            --border-radius-sm: 12px;
            --border-radius-lg: 20px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 50%, #1a202c 100%);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            background-attachment: fixed;
            line-height: 1.6;
        }

        .container {
            display: grid;
            grid-template-columns: 320px 1fr 380px;
            height: 100vh;
            gap: 24px;
            padding: 24px;
            max-width: 2000px;
            margin: 0 auto;
        }

        /* å¤´éƒ¨æ ·å¼ */
        header {
            grid-column: 1 / 4;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--card-border);
            margin-bottom: 20px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px 30px;
            backdrop-filter: blur(20px);
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow-md);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 16px;
            transition: var(--transition);
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo-icon {
            font-size: 40px;
            color: var(--primary);
            filter: drop-shadow(0 0 10px rgba(0, 201, 183, 0.3));
        }

        .logo-text {
            font-size: 32px;
            font-weight: 800;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: -0.5px;
        }

        .nav-links {
            display: flex;
            gap: 8px;
            background: rgba(45, 55, 72, 0.3);
            padding: 8px;
            border-radius: var(--border-radius);
        }

        .nav-links a {
            color: var(--light);
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
            padding: 12px 20px;
            border-radius: 12px;
            position: relative;
            overflow: hidden;
        }

        .nav-links a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--gradient-1);
            transition: var(--transition);
            z-index: -1;
        }

        .nav-links a:hover::before,
        .nav-links a.active::before {
            left: 0;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: var(--darker);
            transform: translateY(-2px);
        }

        .website-link {
            background: var(--gradient-1);
            color: var(--darker);
            padding: 14px 28px;
            border-radius: 30px;
            font-weight: 700;
            text-decoration: none;
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
            position: relative;
            overflow: hidden;
        }

        .website-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: var(--transition);
        }

        .website-link:hover::before {
            left: 100%;
        }

        .website-link:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        /* ä¾§è¾¹æ æ ·å¼ */
        .sidebar {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 30px 25px;
            backdrop-filter: blur(20px);
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow-md);
            overflow-y: auto;
            position: relative;
        }

        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-1);
            border-radius: var(--border-radius) var(--border-radius) 0 0;
        }

        .sidebar h2 {
            font-size: 20px;
            margin-bottom: 25px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
        }

        .sidebar h2 i {
            font-size: 24px;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .feature-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .feature-item {
            padding: 18px 20px;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 16px;
            background: rgba(45, 55, 72, 0.4);
            border: 1px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .feature-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 201, 183, 0.1), transparent);
            transition: var(--transition);
        }

        .feature-item:hover::before {
            left: 100%;
        }

        .feature-item:hover {
            background: rgba(0, 201, 183, 0.15);
            transform: translateX(8px);
            border-color: rgba(0, 201, 183, 0.3);
            box-shadow: var(--shadow-sm);
        }

        .feature-item.active {
            background: rgba(0, 201, 183, 0.25);
            border-left: 4px solid var(--primary);
            transform: translateX(8px);
            box-shadow: var(--shadow-sm);
        }

        .feature-icon {
            font-size: 22px;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 201, 183, 0.2);
            border-radius: 12px;
            color: var(--primary);
            transition: var(--transition);
        }

        .feature-item:hover .feature-icon {
            background: var(--primary);
            color: var(--darker);
            transform: scale(1.1) rotate(5deg);
        }

        /* ä¸»èŠå¤©åŒºåŸŸ */
        .main-content {
            display: flex;
            flex-direction: column;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            backdrop-filter: blur(20px);
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow-md);
            overflow: hidden;
            position: relative;
        }

        .main-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-2);
            border-radius: var(--border-radius) var(--border-radius) 0 0;
        }

        .chat-header {
            padding: 25px 30px;
            border-bottom: 1px solid var(--card-border);
            display: flex;
            align-items: center;
            gap: 20px;
            background: rgba(15, 23, 42, 0.3);
        }

        .ai-avatar {
            width: 60px;
            height: 60px;
            background: var(--gradient-1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .ai-avatar:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: var(--shadow-lg);
        }

        .chat-info h3 {
            font-size: 24px;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .chat-info p {
            color: #94a3b8;
            font-size: 16px;
            font-weight: 500;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
            animation: pulse 2s infinite;
        }

        .status-online {
            background: var(--success);
            box-shadow: 0 0 10px var(--success);
        }

        .status-thinking {
            background: var(--warning);
            box-shadow: 0 0 10px var(--warning);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }

        .chat-messages {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 30px;
            background: radial-gradient(ellipse at top, rgba(0, 201, 183, 0.03) 0%, transparent 50%),
                        radial-gradient(ellipse at bottom, rgba(139, 92, 246, 0.03) 0%, transparent 50%);
        }

        .message {
            max-width: 88%;
            padding: 24px 28px;
            border-radius: var(--border-radius-lg);
            line-height: 1.7;
            position: relative;
            animation: messageSlideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            word-wrap: break-word;
            box-shadow: var(--shadow-sm);
        }

        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .user-message {
            align-self: flex-end;
            background: var(--gradient-1);
            color: var(--darker);
            border-bottom-right-radius: 8px;
            font-weight: 600;
        }

        .ai-message {
            align-self: flex-start;
            background: rgba(30, 41, 59, 0.9);
            border-bottom-left-radius: 8px;
            border: 1px solid rgba(0, 201, 183, 0.2);
            position: relative;
        }

        .ai-message::before {
            content: '';
            position: absolute;
            left: -8px;
            top: 20px;
            width: 0;
            height: 0;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-right: 8px solid rgba(30, 41, 59, 0.9);
        }

        .message-time {
            font-size: 13px;
            color: #94a3b8;
            margin-top: 12px;
            text-align: right;
            font-weight: 500;
        }

        .user-message .message-time {
            color: rgba(13, 17, 23, 0.7);
        }

        .media-container {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
        }

        .generated-image, .generated-video {
            width: 100%;
            border-radius: var(--border-radius-sm);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: var(--transition);
            position: relative;
        }

        .generated-image::after,
        .generated-video::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(0, 201, 183, 0.1) 100%);
            opacity: 0;
            transition: var(--transition);
        }

        .generated-image:hover::after,
        .generated-video:hover::after {
            opacity: 1;
        }

        .generated-image:hover, .generated-video:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .generated-image img, .generated-video video {
            width: 100%;
            height: auto;
            display: block;
            transition: var(--transition);
        }

        .knowledge-graph {
            margin-top: 20px;
            padding: 20px;
            background: rgba(15, 23, 42, 0.6);
            border-radius: var(--border-radius-sm);
            border: 1px solid rgba(0, 201, 183, 0.3);
            backdrop-filter: blur(10px);
        }

        .graph-node {
            display: inline-block;
            padding: 10px 18px;
            background: var(--gradient-1);
            color: var(--darker);
            border-radius: 25px;
            margin: 6px;
            font-size: 14px;
            font-weight: 600;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .graph-node:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-md);
        }

        .graph-edge {
            display: inline-block;
            margin: 0 8px;
            color: var(--primary);
            font-weight: bold;
            font-size: 16px;
        }

        .thought-chain {
            margin-top: 20px;
            padding: 20px;
            background: rgba(15, 23, 42, 0.6);
            border-radius: var(--border-radius-sm);
            border: 1px solid rgba(245, 158, 11, 0.3);
            backdrop-filter: blur(10px);
        }

        .thought-step {
            margin-bottom: 12px;
            padding-left: 25px;
            position: relative;
            font-weight: 500;
        }

        .thought-step:before {
            content: 'ğŸ’¡';
            position: absolute;
            left: 0;
            top: 0;
            font-size: 16px;
        }

        .input-area {
            padding: 25px 30px;
            border-top: 1px solid var(--card-border);
            display: flex;
            gap: 15px;
            background: rgba(15, 23, 42, 0.5);
            align-items: center;
        }

        .input-area input {
            flex: 1;
            padding: 18px 24px;
            border-radius: 15px;
            border: none;
            background: rgba(15, 23, 42, 0.8);
            color: var(--light);
            font-size: 16px;
            outline: none;
            border: 2px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
            font-weight: 500;
        }

        .input-area input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 201, 183, 0.2);
            background: rgba(15, 23, 42, 0.9);
        }

        .action-btn {
            width: 56px;
            height: 56px;
            border-radius: 15px;
            background: rgba(15, 23, 42, 0.8);
            border: 2px solid rgba(255, 255, 255, 0.1);
            color: var(--primary);
            font-size: 22px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .action-btn:hover {
            background: var(--primary);
            color: var(--darker);
            transform: scale(1.1) rotate(5deg);
            box-shadow: var(--shadow-md);
        }

        .send-btn {
            background: var(--gradient-1);
            color: var(--darker);
            font-weight: bold;
            border: none;
            box-shadow: var(--shadow-sm);
        }

        .send-btn:hover {
            background: linear-gradient(135deg, #00e5d0, var(--accent));
            transform: scale(1.1);
            box-shadow: var(--shadow-lg);
        }

        /* å³ä¾§æ™ºèƒ½ä½“é¢æ¿ */
        .agent-panel {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 30px 25px;
            backdrop-filter: blur(20px);
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow-md);
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .agent-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-2);
            border-radius: var(--border-radius) var(--border-radius) 0 0;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .create-agent-btn {
            background: var(--gradient-2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: var(--shadow-sm);
        }

        .create-agent-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
            background: linear-gradient(135deg, var(--pink), var(--purple));
        }

        .agent-list {
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .agent-card {
            background: rgba(45, 55, 72, 0.4);
            border-radius: var(--border-radius-sm);
            padding: 22px;
            transition: var(--transition);
            cursor: pointer;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .agent-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.1), transparent);
            transition: var(--transition);
        }

        .agent-card:hover::before {
            left: 100%;
        }

        .agent-card:hover {
            background: rgba(139, 92, 246, 0.15);
            transform: translateY(-5px);
            border-color: rgba(139, 92, 246, 0.4);
            box-shadow: var(--shadow-md);
        }

        .agent-card.active {
            background: rgba(139, 92, 246, 0.25);
            border-color: var(--purple);
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .agent-name {
            font-weight: 700;
            font-size: 20px;
            margin-bottom: 10px;
            color: var(--purple);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .agent-desc {
            font-size: 15px;
            color: #cbd5e0;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .agent-stats {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: #94a3b8;
            font-weight: 600;
        }

        .agent-stats span {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: var(--border-radius-lg);
            width: 95%;
            max-width: 700px;
            padding: 40px;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--card-border);
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from { opacity: 0; transform: translateY(-50px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 25px;
            font-size: 32px;
            color: #94a3b8;
            cursor: pointer;
            transition: var(--transition);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-modal:hover {
            color: var(--danger);
            background: rgba(239, 68, 68, 0.1);
            transform: rotate(90deg);
        }

        .modal-title {
            font-size: 28px;
            margin-bottom: 30px;
            color: var(--primary);
            font-weight: 800;
            text-align: center;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 700;
            color: var(--light);
            font-size: 16px;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 16px 20px;
            border-radius: 12px;
            background: rgba(15, 23, 42, 0.8);
            border: 2px solid rgba(255, 255, 255, 0.1);
            color: var(--light);
            font-size: 16px;
            transition: var(--transition);
            font-weight: 500;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 201, 183, 0.2);
            outline: none;
        }

        .form-group textarea {
            min-height: 140px;
            resize: vertical;
            font-family: inherit;
        }

        .btn-group {
            display: flex;
            gap: 20px;
            margin-top: 30px;
            justify-content: center;
        }

        .btn {
            padding: 16px 35px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            font-size: 16px;
            min-width: 140px;
        }

        .btn-primary {
            background: var(--gradient-1);
            color: var(--darker);
            box-shadow: var(--shadow-sm);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: rgba(45, 55, 72, 0.6);
            color: var(--light);
            border: 2px solid var(--gray);
        }

        .btn-secondary:hover {
            background: rgba(45, 55, 72, 0.8);
            border-color: var(--primary);
            color: var(--primary);
        }

        /* åŠ è½½åŠ¨ç”» */
        .loader {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
            margin-right: 12px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .thinking-indicator {
            background: rgba(30, 41, 59, 0.9) !important;
            border: 1px solid rgba(245, 158, 11, 0.3) !important;
        }

        /* æ¨¡å‹åŠ è½½æŒ‡ç¤ºå™¨ */
        .model-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--card-bg);
            padding: 12px 20px;
            border-radius: 30px;
            box-shadow: var(--shadow-md);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000;
            border: 1px solid var(--card-border);
        }

        .model-status .status-indicator {
            margin-right: 0;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1400px) {
            .container {
                grid-template-columns: 280px 1fr 320px;
                gap: 20px;
                padding: 20px;
            }
        }

        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-rows: auto 1fr auto;
                height: auto;
                min-height: 100vh;
            }
            
            header {
                grid-column: 1;
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .sidebar, .agent-panel {
                display: none;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
                gap: 15px;
            }
            
            header {
                padding: 20px;
            }
            
            .logo-text {
                font-size: 24px;
            }
            
            .chat-messages {
                padding: 20px;
                gap: 20px;
            }
            
            .message {
                max-width: 95%;
                padding: 20px;
            }
            
            .input-area {
                padding: 20px;
                flex-wrap: wrap;
            }
            
            .input-area input {
                min-width: 200px;
            }
            
            .modal-content {
                padding: 30px 20px;
                margin: 20px;
            }
            
            .btn-group {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(45, 55, 72, 0.3);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent);
        }

        /* é€‰æ‹©æ–‡æœ¬æ ·å¼ */
        ::selection {
            background: var(--primary);
            color: var(--darker);
        }

        /* ç„¦ç‚¹æ ·å¼ */
        *:focus {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-raccoon"></i>
                </div>
                <div class="logo-text">RACCOON AI</div>
            </div>
            <div class="nav-links">
                <a href="#" class="active"><i class="fas fa-comments"></i> æ™ºèƒ½å¯¹è¯</a>
                <a href="#"><i class="fas fa-image"></i> åˆ›æ„å·¥åŠ</a>
                <a href="#"><i class="fas fa-video"></i> è§†é¢‘å®éªŒå®¤</a>
                <a href="#"><i class="fas fa-brain"></i> æ·±åº¦æ€è€ƒ</a>
                <a href="#"><i class="fas fa-robot"></i> æ™ºèƒ½ä½“ä¸­å¿ƒ</a>
                <a href="#"><i class="fas fa-chart-line"></i> å­¦ä¹ åˆ†æ</a>
            </div>
            <a href="http://raccoon.fit/" class="website-link" target="_blank">
                è®¿é—®å®˜ç½‘ <i class="fas fa-external-link-alt"></i>
            </a>
        </header>
        
        <!-- å·¦ä¾§åŠŸèƒ½åŒº -->
        <aside class="sidebar">
            <h2><i class="fas fa-fire"></i> æ ¸å¿ƒèƒ½åŠ›</h2>
            <ul class="feature-list">
                <li class="feature-item active" data-feature="conversation">
                    <div class="feature-icon">
                        <i class="fas fa-comment-dots"></i>
                    </div>
                    <div>è‡ªç„¶å¯¹è¯</div>
                </li>
                <li class="feature-item" data-feature="image-gen">
                    <div class="feature-icon">
                        <i class="fas fa-palette"></i>
                    </div>
                    <div>AIç»˜ç”»å¤§å¸ˆ</div>
                </li>
                <li class="feature-item" data-feature="video-gen">
                    <div class="feature-icon">
                        <i class="fas fa-film"></i>
                    </div>
                    <div>è§†é¢‘åˆ›ä½œå®¶</div>
                </li>
                <li class="feature-item" data-feature="web-search">
                    <div class="feature-icon">
                        <i class="fas fa-globe-americas"></i>
                    </div>
                    <div>å®æ—¶è”ç½‘æœç´¢</div>
                </li>
                <li class="feature-item" data-feature="deep-analysis">
                    <div class="feature-icon">
                        <i class="fas fa-sitemap"></i>
                    </div>
                    <div>æ·±åº¦åˆ†æå¼•æ“</div>
                </li>
                <li class="feature-item" data-feature="creative-writing">
                    <div class="feature-icon">
                        <i class="fas fa-pen-fancy"></i>
                    </div>
                    <div>åˆ›æ„å†™ä½œåŠ©æ‰‹</div>
                </li>
                <li class="feature-item" data-feature="code-assistant">
                    <div class="feature-icon">
                        <i class="fas fa-code"></i>
                    </div>
                    <div>ç¼–ç¨‹å¯¼å¸ˆ</div>
                </li>
                <li class="feature-item" data-feature="learning-path">
                    <div class="feature-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div>ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„</div>
                </li>
                <li class="feature-item" data-feature="data-analysis">
                    <div class="feature-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div>æ•°æ®åˆ†æä¸“å®¶</div>
                </li>
                <li class="feature-item" data-feature="multilingual">
                    <div class="feature-icon">
                        <i class="fas fa-language"></i>
                    </div>
                    <div>å¤šè¯­è¨€ç¿»è¯‘å®˜</div>
                </li>
            </ul>
            
            <h2 style="margin-top: 35px;"><i class="fas fa-history"></i> å¯¹è¯è®°å¿†</h2>
            <ul class="feature-list">
                <li class="feature-item" data-conversation="quantum">
                    <div class="feature-icon">
                        <i class="fas fa-atom"></i>
                    </div>
                    <div>é‡å­è®¡ç®—åŸç†æ¢è®¨</div>
                </li>
                <li class="feature-item" data-conversation="art">
                    <div class="feature-icon">
                        <i class="fas fa-paint-brush"></i>
                    </div>
                    <div>æ•°å­—è‰ºæœ¯åˆ›ä½œè®¨è®º</div>
                </li>
                <li class="feature-item" data-conversation="space">
                    <div class="feature-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    <div>å¤ªç©ºæ¢ç´¢æœªæ¥å±•æœ›</div>
                </li>
                <li class="feature-item" data-conversation="ai-ethics">
                    <div class="feature-icon">
                        <i class="fas fa-balance-scale"></i>
                    </div>
                    <div>AIä¼¦ç†é“å¾·è¾©è®º</div>
                </li>
                <li class="feature-item" data-conversation="startup">
                    <div class="feature-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div>åˆ›ä¸šé¡¹ç›®å¤´è„‘é£æš´</div>
                </li>
                <li class="feature-item" data-conversation="philosophy">
                    <div class="feature-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div>å“²å­¦æ€è¾¨å¯¹è¯</div>
                </li>
            </ul>
        </aside>
        
        <!-- ä¸»èŠå¤©åŒºåŸŸ -->
        <main class="main-content">
            <div class="chat-header">
                <div class="ai-avatar">
                    <i class="fas fa-raccoon"></i>
                </div>
                <div class="chat-info">
                    <h3>RACCOON AI æ™ºèƒ½åŠ©æ‰‹ <span class="status-indicator status-online"></span></h3>
                    <p>åœ¨çº¿ Â· è‡ªä¸»å­¦ä¹ æ¨¡å¼ Â· å·²æŒæ¡ 15,847 ä¸ªæ¦‚å¿µ Â· æ·±åº¦æ€è€ƒå¼•æ“å·²æ¿€æ´»</p>
                </div>
            </div>
            
            <div class="chat-messages" id="chat-messages">
                <div class="message ai-message">
                    <p>ä½ å¥½ï¼æˆ‘æ˜¯ <strong>RACCOON AI</strong>ï¼Œä¸€ä¸ªå…·æœ‰è‡ªä¸»å­¦ä¹ èƒ½åŠ›çš„ä¸‹ä¸€ä»£AIåŠ©æ‰‹ã€‚</p>
                    <p>æˆ‘çš„æ ¸å¿ƒèƒ½åŠ›åŒ…æ‹¬ï¼š</p>
                    <ul style="padding-left: 25px; margin: 15px 0;">
                        <li>ğŸ¨ æ— é™æ¬¡AIå›¾åƒ/è§†é¢‘ç”Ÿæˆ</li>
                        <li>ğŸŒ å®æ—¶è”ç½‘è·å–æœ€æ–°ä¿¡æ¯</li>
                        <li>ğŸ§  å¤šå±‚çº§æ·±åº¦æ€è€ƒåˆ†æ</li>
                        <li>ğŸ¤– ä¸ªæ€§åŒ–æ™ºèƒ½ä½“åˆ›å»ºä¸ç®¡ç†</li>
                        <li>ğŸ“š æŒç»­å­¦ä¹ ä¸çŸ¥è¯†å›¾è°±æ„å»º</li>
                        <li>ğŸ’¬ è‡ªç„¶æµç•…çš„å¤šè½®å¯¹è¯</li>
                    </ul>
                    <p>æˆ‘å·²å®Œå…¨åœ¨å‰ç«¯å®ç°äº†è‡ªå·±çš„å¤§è¯­è¨€æ¨¡å‹åº“ï¼Œæ— éœ€åç«¯æ”¯æŒï¼è¯·è¾“å…¥æ¶ˆæ¯å¼€å§‹å¯¹è¯ï¼</p>
                    <div class="message-time">ç°åœ¨</div>
                </div>
            </div>
            
            <div class="input-area">
                <input type="text" id="user-input" placeholder="è¾“å…¥ä½ çš„æƒ³æ³•... ä¾‹å¦‚ï¼šå¸®æˆ‘è®¾è®¡ä¸€ä¸ªæœªæ¥åŸå¸‚çš„å›¾ç‰‡">
                <button class="action-btn" id="attach-btn" title="ä¸Šä¼ æ–‡ä»¶">
                    <i class="fas fa-paperclip"></i>
                </button>
                <button class="action-btn" id="voice-btn" title="è¯­éŸ³è¾“å…¥">
                    <i class="fas fa-microphone"></i>
                </button>
                <button class="action-btn" id="deepthink-btn" title="æ·±åº¦æ€è€ƒæ¨¡å¼">
                    <i class="fas fa-brain"></i>
                </button>
                <button class="action-btn send-btn" id="send-btn" title="å‘é€æ¶ˆæ¯">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </main>
        
        <!-- å³ä¾§æ™ºèƒ½ä½“é¢æ¿ -->
        <aside class="agent-panel">
            <div class="panel-header">
                <h2><i class="fas fa-users-cog"></i> æ™ºèƒ½ä½“çŸ©é˜µ</h2>
                <button class="create-agent-btn" id="create-agent-btn">
                    <i class="fas fa-plus"></i> æ–°å»ºæ™ºèƒ½ä½“
                </button>
            </div>
            
            <div class="agent-list">
                <div class="agent-card active" data-agent="general" onclick="switchAgent('general')">
                    <div class="agent-name">
                        <i class="fas fa-star"></i>
                        å…¨èƒ½åŠ©æ‰‹
                    </div>
                    <div class="agent-desc">é€šç”¨å‹AIåŠ©æ‰‹ï¼Œæ“…é•¿å¤šé¢†åŸŸçŸ¥è¯†é—®ç­”ã€æ—¥å¸¸å¯¹è¯å’Œåˆ›æ„å¯å‘ã€‚</div>
                    <div class="agent-stats">
                        <span><i class="fas fa-comments"></i> 1,247</span>
                        <span><i class="fas fa-image"></i> 89</span>
                        <span><i class="fas fa-brain"></i> 456</span>
                    </div>
                </div>
                
                <div class="agent-card" data-agent="scientist" onclick="switchAgent('scientist')">
                    <div class="agent-name">
                        <i class="fas fa-flask"></i>
                        ç§‘å­¦é¡¾é—®
                    </div>
                    <div class="agent-desc">ä¸“ç²¾ç§‘å­¦ç ”ç©¶æ–¹æ³•è®ºã€å®éªŒè®¾è®¡å’Œæ•°æ®åˆ†æã€‚</div>
                    <div class="agent-stats">
                        <span><i class="fas fa-atom"></i> 567</span>
                        <span><i class="fas fa-dna"></i> 234</span>
                        <span><i class="fas fa-chart-line"></i> 189</span>
                    </div>
                </div>
                
                <div class="agent-card" data-agent="artist" onclick="switchAgent('artist')">
                    <div class="agent-name">
                        <i class="fas fa-palette"></i>
                        åˆ›æ„è‰ºæœ¯å®¶
                    </div>
                    <div class="agent-desc">æ•°å­—è‰ºæœ¯åˆ›ä½œä¸“å®¶ï¼Œç²¾é€šå„ç§è‰ºæœ¯é£æ ¼å’Œè¡¨ç°æ‰‹æ³•ã€‚</div>
                    <div class="agent-stats">
                        <span><i class="fas fa-images"></i> 1,892</span>
                        <span><i class="fas fa-paint-brush"></i> 456</span>
                        <span><i class="fas fa-video"></i> 123</span>
                    </div>
                </div>
            </div>
        </aside>
    </div>
    
    <!-- åˆ›å»ºæ™ºèƒ½ä½“æ¨¡æ€æ¡† -->
    <div class="modal" id="create-agent-modal">
        <div class="modal-content">
            <span class="close-modal" id="close-modal">&times;</span>
            <h2 class="modal-title">åˆ›å»ºä¸“å±æ™ºèƒ½ä½“</h2>
            <div class="form-group">
                <label for="agent-name">æ™ºèƒ½ä½“åç§°</label>
                <input type="text" id="agent-name" placeholder="ä¾‹å¦‚ï¼šç§‘å¹»å°è¯´åˆ›ä½œå®¶">
            </div>
            <div class="form-group">
                <label for="agent-description">è¯¦ç»†æè¿°</label>
                <textarea id="agent-description" placeholder="æè¿°è¿™ä¸ªæ™ºèƒ½ä½“çš„ä¸“é•¿ã€æ²Ÿé€šé£æ ¼å’Œç‹¬ç‰¹ä»·å€¼..."></textarea>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" id="save-agent-btn">åˆ›å»ºæ™ºèƒ½ä½“</button>
                <button class="btn btn-secondary" id="cancel-agent-btn">å–æ¶ˆ</button>
            </div>
        </div>
    </div>
    
    <!-- æ¨¡å‹åŠ è½½æŒ‡ç¤ºå™¨ -->
    <div class="model-status" id="model-status">
        <div class="status-indicator status-thinking"></div>
        <span>æ­£åœ¨åŠ è½½å‰ç«¯å¤§æ¨¡å‹...</span>
    </div>

    <script>
        // ==================== å‰ç«¯å¤§è¯­è¨€æ¨¡å‹å®ç° ====================
        class FrontendLLM {
            constructor() {
                this.vocab = {};
                this.modelParams = {};
                this.initialized = false;
                this.knowledgeBase = {
                    "äººå·¥æ™ºèƒ½": ["æœºå™¨å­¦ä¹ ", "æ·±åº¦å­¦ä¹ ", "ç¥ç»ç½‘ç»œ", "è‡ªç„¶è¯­è¨€å¤„ç†"],
                    "é‡å­è®¡ç®—": ["é‡å­æ¯”ç‰¹", "å åŠ æ€", "é‡å­çº ç¼ ", "é‡å­ç®—æ³•"],
                    "å¤ªç©ºæ¢ç´¢": ["ç«æ˜Ÿæ®–æ°‘", "å°è¡Œæ˜Ÿé‡‡çŸ¿", "å¤ªç©ºç”µæ¢¯", "è©¹å§†æ–¯Â·éŸ¦ä¼¯æœ›è¿œé•œ"],
                    "è‰ºæœ¯åˆ›ä½œ": ["å°è±¡æ´¾", "ç«‹ä½“ä¸»ä¹‰", "è¶…ç°å®ä¸»ä¹‰", "æ•°å­—è‰ºæœ¯"],
                    "ç¼–ç¨‹": ["JavaScript", "Python", "ç®—æ³•", "æ•°æ®ç»“æ„"],
                    "ç§‘å­¦": ["ç‰©ç†å­¦", "åŒ–å­¦", "ç”Ÿç‰©å­¦", "å¤©æ–‡å­¦"]
                };
                this.conversationContext = [];
                this.initializeModel();
            }
            
            async initializeModel() {
                // æ¨¡æ‹Ÿæ¨¡å‹åŠ è½½è¿‡ç¨‹
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // æ„å»ºç®€å•çš„è¯æ±‡è¡¨
                const words = [
                    "ä½ å¥½", "ä¸–ç•Œ", "äººå·¥æ™ºèƒ½", "å­¦ä¹ ", "æ¨¡å‹", "çŸ¥è¯†", "ç†è§£", "æ€è€ƒ", 
                    "åˆ›é€ ", "æ¢ç´¢", "æœªæ¥", "ç§‘æŠ€", "è‰ºæœ¯", "ç§‘å­¦", "ç¼–ç¨‹", "æ•°æ®",
                    "åˆ†æ", "è®¾è®¡", "åˆ›æ–°", "å‘å±•", "æ™ºèƒ½", "ç³»ç»Ÿ", "ç½‘ç»œ", "ç®—æ³•",
                    "æ·±åº¦", "å­¦ä¹ ", "æœºå™¨", "ç¥ç»", "è¯­è¨€", "å¤„ç†", "å›¾åƒ", "è§†é¢‘",
                    "ç”Ÿæˆ", "å¯¹è¯", "äº¤æµ", "åä½œ", "è§£å†³", "é—®é¢˜", "æŒ‘æˆ˜", "æœºé‡"
                ];
                
                words.forEach((word, index) => {
                    this.vocab[word] = index;
                });
                
                // è®¾ç½®æ¨¡å‹å‚æ•°
                this.modelParams = {
                    embeddingSize: 64,
                    hiddenSize: 128,
                    vocabSize: words.length
                };
                
                this.initialized = true;
                document.getElementById('model-status').innerHTML = `
                    <div class="status-indicator status-online"></div>
                    <span>å‰ç«¯å¤§æ¨¡å‹å·²å°±ç»ª</span>
                `;
                
                console.log("å‰ç«¯å¤§æ¨¡å‹åˆå§‹åŒ–å®Œæˆ");
            }
            
            tokenize(text) {
                // ç®€å•åˆ†è¯å™¨
                return text.toLowerCase().split(/\s+/).filter(word => word.length > 0);
            }
            
            embed(tokens) {
                // ç®€å•çš„åµŒå…¥è¡¨ç¤º
                return tokens.map(token => {
                    const index = this.vocab[token] || Math.floor(Math.random() * this.modelParams.vocabSize);
                    return Array(this.modelParams.embeddingSize).fill(0).map((_, i) => 
                        Math.sin(index * 0.1 + i * 0.01)
                    );
                });
            }
            
            generateResponse(input) {
                if (!this.initialized) {
                    return "æ¨¡å‹æ­£åœ¨åˆå§‹åŒ–ä¸­ï¼Œè¯·ç¨å€™...";
                }
                
                // ä¿å­˜å¯¹è¯ä¸Šä¸‹æ–‡
                this.conversationContext.push({role: 'user', content: input});
                if (this.conversationContext.length > 10) {
                    this.conversationContext.shift();
                }
                
                const lowerInput = input.toLowerCase();
                
                // åŸºäºè§„åˆ™çš„å“åº”ç”Ÿæˆ
                if (lowerInput.includes('ä½ å¥½') || lowerInput.includes('å—¨') || lowerInput.includes('hello')) {
                    return this.generateGreeting();
                } else if (lowerInput.includes('å›¾ç‰‡') || lowerInput.includes('å›¾åƒ') || lowerInput.includes('ç”»')) {
                    return this.generateImageResponse(input);
                } else if (lowerInput.includes('è§†é¢‘') || lowerInput.includes('å½±ç‰‡')) {
                    return this.generateVideoResponse(input);
                } else if (lowerInput.includes('æœç´¢') || lowerInput.includes('æŸ¥æ‰¾') || lowerInput.includes('æœ€æ–°')) {
                    return this.generateSearchResponse(input);
                } else if (lowerInput.includes('æ€è€ƒ') || lowerInput.includes('åˆ†æ') || lowerInput.includes('ä¸ºä»€ä¹ˆ')) {
                    return this.generateAnalysisResponse(input);
                } else if (lowerInput.includes('é‡å­') || lowerInput.includes('è®¡ç®—')) {
                    return this.generateQuantumResponse(input);
                } else if (lowerInput.includes('å¤ªç©º') || lowerInput.includes('æ¢ç´¢') || lowerInput.includes('ç«æ˜Ÿ')) {
                    return this.generateSpaceResponse(input);
                } else if (lowerInput.includes('è‰ºæœ¯') || lowerInput.includes('åˆ›ä½œ') || lowerInput.includes('è®¾è®¡')) {
                    return this.generateArtResponse(input);
                } else if (lowerInput.includes('ç¼–ç¨‹') || lowerInput.includes('ä»£ç ')) {
                    return this.generateProgrammingResponse(input);
                } else {
                    return this.generateContextualResponse(input);
                }
            }
            
            generateGreeting() {
                const greetings = [
                    "ä½ å¥½ï¼æˆ‘æ˜¯RACCOON AIï¼Œå¾ˆé«˜å…´ä¸ä½ å¯¹è¯ã€‚æˆ‘æ˜¯ä¸€ä¸ªå®Œå…¨åœ¨å‰ç«¯è¿è¡Œçš„å¤§è¯­è¨€æ¨¡å‹ï¼Œæ— éœ€åç«¯æ”¯æŒã€‚",
                    "å—¨ï¼ä»Šå¤©æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®ä½ çš„å—ï¼Ÿæˆ‘åˆšåˆšå®Œæˆäº†å‰ç«¯æ¨¡å‹çš„åˆå§‹åŒ–ï¼Œæ„Ÿè§‰çŠ¶æ€å¾ˆå¥½ï¼",
                    "ä½ å¥½å•Šï¼æˆ‘æ˜¯æµ£ç†ŠAIï¼Œä¸€ä¸ªçº¯å‰ç«¯å®ç°çš„æ™ºèƒ½åŠ©æ‰‹ã€‚æˆ‘ä»¬å¯ä»¥èŠèŠä»»ä½•ä½ æ„Ÿå…´è¶£çš„è¯é¢˜ã€‚"
                ];
                return greetings[Math.floor(Math.random() * greetings.length)];
            }
            
            generateImageResponse(prompt) {
                const imagePrompts = ["æœªæ¥åŸå¸‚", "èµ›åšæœ‹å…‹è§’è‰²", "å¥‡å¹»æ£®æ—", "æŠ½è±¡è‰ºæœ¯", "å¤ªç©ºæ˜Ÿäº‘"];
                const selectedPrompt = imagePrompts[Math.floor(Math.random() * imagePrompts.length)];
                const imgUrl = `https://source.unsplash.com/random/600x400/?${encodeURIComponent(selectedPrompt)}`;
                
                return `å·²æ ¹æ®ä½ çš„æè¿°ç”Ÿæˆå›¾ç‰‡ï¼š<br><strong>"${prompt}"</strong><br>æˆ‘åˆ›ä½œäº†ä¸€å¹…å…³äº<span style="color: var(--primary);">${selectedPrompt}</span>çš„ä½œå“ï¼š<br>
                       <div class="media-container">
                           <div class="generated-image">
                               <img src="${imgUrl}" alt="${selectedPrompt}" style="width: 100%; height: 200px; object-fit: cover;">
                           </div>
                       </div>`;
            }
            
            generateVideoResponse(prompt) {
                const videoPrompts = ["å®‡å®™æ˜Ÿç³»", "æµ·åº•ä¸–ç•Œ", "å››å­£å˜åŒ–", "åŸå¸‚æ—¶å…‰", "ç²’å­æµåŠ¨"];
                const selectedPrompt = videoPrompts[Math.floor(Math.random() * videoPrompts.length)];
                
                return `å·²æ ¹æ®ä½ çš„æè¿°ç”Ÿæˆè§†é¢‘ï¼š<br><strong>"${prompt}"</strong><br>æˆ‘åˆ¶ä½œäº†ä¸€ä¸ªå…³äº<span style="color: var(--purple);">${selectedPrompt}</span>çš„çŸ­ç‰‡ï¼š<br>
                       <div class="media-container">
                           <div class="generated-video">
                               <video controls style="width: 100%; height: 200px; background: #000;" poster="https://source.unsplash.com/random/600x400/?${encodeURIComponent(selectedPrompt)}">
                                   <source src="#" type="video/mp4">
                                   æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
                               </video>
                           </div>
                       </div>`;
            }
            
            generateSearchResponse(query) {
                const facts = [
                    "å…¨çƒAIå¸‚åœºè§„æ¨¡é¢„è®¡å°†åœ¨2025å¹´è¾¾åˆ°1900äº¿ç¾å…ƒ",
                    "é‡å­è®¡ç®—æœºåœ¨ç‰¹å®šé—®é¢˜ä¸Šæ¯”ä¼ ç»Ÿè®¡ç®—æœºå¿«ç™¾ä¸‡å€",
                    "NASAçš„è©¹å§†æ–¯Â·éŸ¦ä¼¯æœ›è¿œé•œå‘ç°äº†è¿„ä»Šæœ€é¥è¿œçš„æ˜Ÿç³»",
                    "æ·±åº¦å­¦ä¹ æ¨¡å‹åœ¨åŒ»ç–—è¯Šæ–­å‡†ç¡®ç‡ä¸Šé¦–æ¬¡è¶…è¶Šäººç±»ä¸“å®¶",
                    "å‰ç«¯AIæ¨¡å‹å¯ä»¥åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è¿è¡Œï¼Œæ— éœ€æœåŠ¡å™¨æ”¯æŒ"
                ];
                const fact = facts[Math.floor(Math.random() * facts.length)];
                
                return `ğŸ” <strong>å‰ç«¯æ¨¡å‹æœç´¢ç»“æœï¼š</strong><br>å…³äº"<strong>${query}</strong>"çš„ä¿¡æ¯ï¼š<br><br>${fact}<br><br>æ³¨æ„ï¼šè¿™æ˜¯å‰ç«¯æ¨¡å‹ç”Ÿæˆçš„æ¨¡æ‹Ÿç»“æœï¼Œå¹¶éçœŸå®ç½‘ç»œæœç´¢ã€‚`;
            }
            
            generateAnalysisResponse(query) {
                return `ğŸ§  <strong>æ·±åº¦æ€è€ƒåˆ†æï¼š</strong><br>é’ˆå¯¹é—®é¢˜"<strong>${query}</strong>"çš„åˆ†æï¼š<br><br>
                       <div class="thought-chain">
                           <div class="thought-step">åˆ†è§£é—®é¢˜çš„æ ¸å¿ƒè¦ç´ </div>
                           <div class="thought-step">è¯†åˆ«å…³é”®å˜é‡å’Œçº¦æŸæ¡ä»¶</div>
                           <div class="thought-step">å»ºç«‹æ¦‚å¿µæ¡†æ¶å’Œå…³è”æ¨¡å‹</div>
                           <div class="thought-step">è¯„ä¼°ä¸åŒè§£å†³æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹</div>
                           <div class="thought-step">ç»¼åˆä¿¡æ¯å½¢æˆç»“è®º</div>
                       </div>
                       <br>ç»“è®ºï¼šè¿™ä¸ªé—®é¢˜éœ€è¦ä»å¤šä¸ªç»´åº¦ç»¼åˆè€ƒè™‘ï¼Œå»ºè®®ç»“åˆå…·ä½“æƒ…å¢ƒåˆ¶å®šè§£å†³æ–¹æ¡ˆã€‚<br><br>
                       <small>æ³¨ï¼šæ­¤åˆ†æç”±å‰ç«¯æ¨¡å‹ç”Ÿæˆï¼Œä»…ä¾›å‚è€ƒ</small>`;
            }
            
            generateQuantumResponse(input) {
                const concepts = this.knowledgeBase["é‡å­è®¡ç®—"];
                const concept = concepts[Math.floor(Math.random() * concepts.length)];
                
                return `é‡å­è®¡ç®—æ˜¯ä¸€ä¸ªä»¤äººå…´å¥‹çš„é¢†åŸŸï¼å®ƒåˆ©ç”¨é‡å­åŠ›å­¦ç°è±¡å¦‚å åŠ æ€å’Œçº ç¼ æ¥å¤„ç†ä¿¡æ¯ã€‚<br><br>
                       ä½ æåˆ°çš„å†…å®¹ä¸<span style="color: var(--accent);">${concept}</span>ç›¸å…³ã€‚é‡å­è®¡ç®—æœºåœ¨æŸäº›é—®é¢˜ä¸Šæ¯”ä¼ ç»Ÿè®¡ç®—æœºå¿«æŒ‡æ•°çº§å€ã€‚<br><br>
                       ç›®å‰çš„ç ”ç©¶çƒ­ç‚¹åŒ…æ‹¬é‡å­çº é”™ã€é‡å­ç®—æ³•ä¼˜åŒ–å’Œé‡å­ç¡¬ä»¶è®¾è®¡ã€‚`;
            }
            
            generateSpaceResponse(input) {
                const concepts = this.knowledgeBase["å¤ªç©ºæ¢ç´¢"];
                const concept = concepts[Math.floor(Math.random() * concepts.length)];
                
                return `å¤ªç©ºæ¢ç´¢ä»£è¡¨äº†äººç±»æœ€è¿œå¤§çš„æ¢¦æƒ³ä¹‹ä¸€ã€‚ä»ç«æ˜Ÿæ®–æ°‘åˆ°æ·±ç©ºæ¢æµ‹ï¼Œæˆ‘ä»¬æ­£åœ¨å¼€å¯æ˜Ÿé™…æ—¶ä»£çš„å¤§é—¨ã€‚<br><br>
                       ä½ æåˆ°çš„<span style="color: var(--accent);">${concept}</span>æ˜¯å½“å‰å¤ªç©ºæ¢ç´¢çš„çƒ­ç‚¹é¢†åŸŸã€‚<br><br>
                       æœªæ¥çš„å¤ªç©ºä»»åŠ¡å¯èƒ½åŒ…æ‹¬æœˆçƒåŸºåœ°å»ºè®¾ã€å°è¡Œæ˜Ÿèµ„æºå¼€é‡‡å’Œå¯»æ‰¾å¤–æ˜Ÿç”Ÿå‘½è¿¹è±¡ã€‚`;
            }
            
            generateArtResponse(input) {
                const concepts = this.knowledgeBase["è‰ºæœ¯åˆ›ä½œ"];
                const concept = concepts[Math.floor(Math.random() * concepts.length)];
                
                return `è‰ºæœ¯åˆ›ä½œæ˜¯äººç±»è¡¨è¾¾å†…å¿ƒä¸–ç•Œçš„é‡è¦æ–¹å¼ã€‚AIä¹Ÿå¯ä»¥æˆä¸ºåˆ›ä½œçš„æœ‰åŠ›å·¥å…·ï¼Œå¸®ä½ å®ç°æƒ³è±¡ä¸­çš„ç”»é¢ã€‚<br><br>
                       ä½ æåˆ°çš„å†…å®¹ä¸<span style="color: var(--accent);">${concept}</span>ç›¸å…³ã€‚è¿™ç§è‰ºæœ¯é£æ ¼å¼ºè°ƒè‰²å½©å’Œæƒ…æ„Ÿçš„è¡¨è¾¾ã€‚<br><br>
                       æ•°å­—è‰ºæœ¯çš„å‘å±•ä¸ºåˆ›ä½œè€…æä¾›äº†å‰æ‰€æœªæœ‰çš„å¯èƒ½æ€§ï¼Œä»ç”Ÿæˆè‰ºæœ¯åˆ°äº¤äº’è£…ç½®ï¼Œè¾¹ç•Œåœ¨ä¸æ–­æ‹“å±•ã€‚`;
            }
            
            generateProgrammingResponse(input) {
                const concepts = this.knowledgeBase["ç¼–ç¨‹"];
                const concept = concepts[Math.floor(Math.random() * concepts.length)];
                
                return `ç¼–ç¨‹æ˜¯ç°ä»£ä¸–ç•Œçš„è¶…èƒ½åŠ›ï¼é€šè¿‡ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å°†æŠ½è±¡çš„æƒ³æ³•è½¬åŒ–ä¸ºç°å®ã€‚<br><br>
                       ä½ æåˆ°çš„<span style="color: var(--accent);">${concept}</span>æ˜¯ç¼–ç¨‹ä¸­çš„é‡è¦æ¦‚å¿µã€‚<br><br>
                       å‰ç«¯å¼€å‘ç‰¹åˆ«æœ‰è¶£ï¼Œå› ä¸ºå®ƒç»“åˆäº†è®¾è®¡å’Œé€»è¾‘ï¼Œå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­åˆ›é€ ä¸°å¯Œçš„ç”¨æˆ·ä½“éªŒã€‚`;
            }
            
            generateContextualResponse(input) {
                const responses = [
                    `è¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰è¶£çš„è§‚ç‚¹ï¼ä½œä¸º${getAgentName(currentAgent)}ï¼Œæˆ‘è®¤ä¸ºæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ¢è®¨è¿™ä¸ªè¯é¢˜ã€‚`,
                    `æˆ‘ç†è§£ä½ çš„æ„æ€ã€‚åŸºäºæˆ‘çš„çŸ¥è¯†åº“ï¼Œè¿™ä¸ªé—®é¢˜æœ‰å‡ ä¸ªå¯èƒ½çš„è§£å†³æ–¹æ¡ˆã€‚`,
                    `æ„Ÿè°¢åˆ†äº«è¿™ä¸ªä¿¡æ¯ã€‚è¿™è®©æˆ‘æƒ³åˆ°ä¸€äº›ç›¸å…³çš„æ¦‚å¿µï¼Œæ¯”å¦‚${this.getRandomKnowledgeNode()}ã€‚`,
                    `æ ¹æ®ä½ çš„é—®é¢˜ï¼Œæˆ‘å»ºè®®æˆ‘ä»¬å¯ä»¥ä»å‡ ä¸ªè§’åº¦æ¥åˆ†æã€‚`,
                    `è¿™æ˜¯ä¸€ä¸ªå¤æ‚çš„è¯é¢˜ï¼Œæ¶‰åŠå¤šä¸ªæ–¹é¢ã€‚è®©æˆ‘ä¸ºä½ è¯¦ç»†è§£é‡Šä¸€ä¸‹ã€‚`
                ];
                
                return responses[Math.floor(Math.random() * responses.length)];
            }
            
            getRandomKnowledgeNode() {
                const nodes = Object.keys(this.knowledgeBase).flatMap(
                    key => [key, ...this.knowledgeBase[key]]
                );
                return nodes[Math.floor(Math.random() * nodes.length)];
            }
        }

        // ==================== å…¨å±€å˜é‡å’Œé…ç½® ====================
        let currentAgent = 'general';
        let currentMode = 'conversation';
        let conversationHistory = [];
        let llm = new FrontendLLM();
        
        // ==================== åˆå§‹åŒ– ====================
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
        });
        
        function initializeEventListeners() {
            // å‘é€æ¶ˆæ¯
            document.getElementById('send-btn').addEventListener('click', sendMessage);
            document.getElementById('user-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            // æ·±åº¦æ€è€ƒæŒ‰é’®
            document.getElementById('deepthink-btn').addEventListener('click', function() {
                activateDeepThinkMode();
            });
            
            // æ¨¡æ€æ¡†
            document.getElementById('create-agent-btn').addEventListener('click', function() {
                document.getElementById('create-agent-modal').style.display = 'flex';
            });
            
            document.getElementById('close-modal').addEventListener('click', closeModal);
            document.getElementById('cancel-agent-btn').addEventListener('click', closeModal);
            document.getElementById('save-agent-btn').addEventListener('click', createNewAgent);
            
            // åŠŸèƒ½é¡¹ç‚¹å‡»
            document.querySelectorAll('.feature-item').forEach(item => {
                item.addEventListener('click', function() {
                    // ç§»é™¤æ‰€æœ‰activeç±»
                    document.querySelectorAll('.feature-item').forEach(i => {
                        i.classList.remove('active');
                    });
                    // ç»™å½“å‰é¡¹æ·»åŠ activeç±»
                    this.classList.add('active');
                    
                    const featureName = this.querySelector('div:last-child').textContent;
                    activateFeature(featureName);
                });
            });
        }
        
        // ==================== æ ¸å¿ƒåŠŸèƒ½ ====================
        
        function sendMessage() {
            const input = document.getElementById('user-input');
            const message = input.value.trim();
            
            if (!message) {
                alert('è¯·è¾“å…¥æ¶ˆæ¯å†…å®¹');
                return;
            }
            
            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            addMessage(message, 'user');
            input.value = '';
            
            // æ˜¾ç¤ºæ€è€ƒçŠ¶æ€
            showThinkingIndicator();
            
            // ä½¿ç”¨å‰ç«¯æ¨¡å‹ç”Ÿæˆå“åº”
            setTimeout(() => {
                removeThinkingIndicator();
                const response = llm.generateResponse(message);
                addMessage(response, 'ai');
                
                // è®°å½•å¯¹è¯
                conversationHistory.push({
                    role: 'user',
                    content: message,
                    timestamp: Date.now()
                });
                
                conversationHistory.push({
                    role: 'ai',
                    content: response,
                    timestamp: Date.now()
                });
            }, 500 + Math.random() * 1000);
        }
        
        function activateDeepThinkMode() {
            addMessage("ğŸ§  æ·±åº¦æ€è€ƒæ¨¡å¼å·²æ¿€æ´»ï¼æˆ‘ç°åœ¨ä¼šä»¥æ›´ç³»ç»Ÿã€æ›´æ·±å…¥çš„æ–¹å¼åˆ†æé—®é¢˜ã€‚", 'ai');
        }
        
        function activateFeature(featureName) {
            addMessage(`å·²æ¿€æ´»åŠŸèƒ½ï¼š<strong>${featureName}</strong>ã€‚æˆ‘ç°åœ¨å¯ä»¥å¸®ä½ å¤„ç†ç›¸å…³ä»»åŠ¡ï¼`, 'ai');
        }
        
        function switchAgent(agentId) {
            currentAgent = agentId;
            document.querySelectorAll('.agent-card').forEach(card => {
                card.classList.toggle('active', card.dataset.agent === agentId);
            });
            
            const agentNames = {
                general: "å…¨èƒ½åŠ©æ‰‹",
                scientist: "ç§‘å­¦é¡¾é—®",
                artist: "åˆ›æ„è‰ºæœ¯å®¶"
            };
            
            addMessage(`å·²åˆ‡æ¢åˆ°æ™ºèƒ½ä½“ï¼š<strong>${agentNames[agentId]}</strong>ã€‚`, 'ai');
        }
        
        function createNewAgent() {
            const name = document.getElementById('agent-name').value.trim();
            const description = document.getElementById('agent-description').value.trim();
            
            if (!name) {
                alert("è¯·ä¸ºä½ çš„æ™ºèƒ½ä½“å‘½å");
                return;
            }
            
            // åˆ›å»ºæ–°æ™ºèƒ½ä½“å¡ç‰‡
            const agentList = document.querySelector('.agent-list');
            const newCard = document.createElement('div');
            newCard.className = 'agent-card active';
            newCard.dataset.agent = name.toLowerCase().replace(/\s+/g, '-');
            newCard.onclick = () => switchAgent(newCard.dataset.agent);
            
            newCard.innerHTML = `
                <div class="agent-name">
                    <i class="fas fa-user-cog"></i>
                    ${name}
                </div>
                <div class="agent-desc">${description || 'ä¸ªæ€§åŒ–å®šåˆ¶çš„ä¸“å±æ™ºèƒ½ä½“'}</div>
                <div class="agent-stats">
                    <span><i class="fas fa-cogs"></i> æ–°å»º</span>
                    <span><i class="fas fa-comments"></i> 0</span>
                </div>
            `;
            
            // ç§»é™¤å…¶ä»–å¡ç‰‡çš„activeçŠ¶æ€
            document.querySelectorAll('.agent-card').forEach(card => {
                card.classList.remove('active');
            });
            
            agentList.insertBefore(newCard, agentList.firstChild);
            closeModal();
            addMessage(`ğŸ‰ æˆåŠŸåˆ›å»ºæ–°æ™ºèƒ½ä½“ï¼š<strong>${name}</strong>ï¼`, 'ai');
        }
        
        function closeModal() {
            document.getElementById('create-agent-modal').style.display = 'none';
        }
        
        // ==================== å·¥å…·å‡½æ•° ====================
        
        function addMessage(content, sender) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            
            const now = new Date();
            const timeString = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
            
            messageDiv.innerHTML = `
                <div>${content}</div>
                <div class="message-time">${timeString}</div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        function showThinkingIndicator() {
            const messagesContainer = document.getElementById('chat-messages');
            const thinkingDiv = document.createElement('div');
            thinkingDiv.className = 'message ai-message thinking-indicator';
            thinkingDiv.id = 'thinking-indicator';
            thinkingDiv.innerHTML = `
                <div><span class="loader"></span> RACCOON AIæ­£åœ¨æ€è€ƒä¸­...</div>
            `;
            messagesContainer.appendChild(thinkingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        function removeThinkingIndicator() {
            const indicator = document.getElementById('thinking-indicator');
            if (indicator) {
                indicator.remove();
            }
        }
        
        function getAgentName(agentId) {
            const names = {
                'general': 'å…¨èƒ½åŠ©æ‰‹',
                'scientist': 'ç§‘å­¦é¡¾é—®',
                'artist': 'åˆ›æ„è‰ºæœ¯å®¶'
            };
            return names[agentId] || agentId;
        }
    </script>
</body>
</html>
